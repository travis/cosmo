<?xml version="1.0" encoding="UTF-8"?>

<nodeTypes xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
           xmlns:mix="http://www.jcp.org/jcr/mix/1.0"
           xmlns:dav="http://osafoundation.org/jcr/dav/1.0"
           xmlns:ticket="http://osafoundation.org/jcr/dav/ticket/1.0"
           xmlns:icalendar="http://osafoundation.org/jcr/icalendar/1.0"
           xmlns:caldav="http://osafoundation.org/jcr/caldav/1.0">

  <!-- tickets -->

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="ticket:ticket" primaryItemName="">
    <supertypes>
      <supertype>nt:base</supertype>
    </supertypes>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="false" name="ticket:id"
                        onParentVersion="COPY" protected="false"
                        requiredType="String"/>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="false" name="ticket:owner"
                        onParentVersion="COPY" protected="false"
                        requiredType="String"/>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="false" name="ticket:timeout"
                        onParentVersion="COPY" protected="false"
                        requiredType="String">
      <valueConstraints>
        <valueConstraint>infinity</valueConstraint>
        <valueConstraint>Second\-\d+</valueConstraint>
    </valueConstraints>
    </propertyDefinition>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="true" name="ticket:privileges"
                        onParentVersion="COPY" protected="false"
                        requiredType="String">
      <valueConstraints>
        <valueConstraint>read</valueConstraint>
        <valueConstraint>write</valueConstraint>
      </valueConstraints>
    </propertyDefinition>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="false" name="ticket:created"
                        onParentVersion="COPY" protected="false"
                        requiredType="Date"/>
  </nodeType>

  <nodeType hasOrderableChildNodes="false" isMixin="true"
            name="mix:ticketable" primaryItemName="">
    <supertypes/>
    <childNodeDefinition name="dav:ticket" autoCreated="false"
                         mandatory="false" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="true"
                         defaultPrimaryType="ticket:ticket">
      <requiredPrimaryTypes>
        <requiredPrimaryType>ticket:ticket</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>

  <!-- icalendar base -->

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="icalendar:parameter" primaryItemName="">
    <supertypes>
      <supertype>nt:base</supertype>
    </supertypes>
  </nodeType>

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="icalendar:property" primaryItemName="">
    <supertypes>
      <supertype>nt:base</supertype>
    </supertypes>
    <childNodeDefinition name="*" autoCreated="false"
                         mandatory="false" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="true"
                         defaultPrimaryType="">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:parameter</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="icalendar:component" primaryItemName="">
    <supertypes>
      <supertype>nt:base</supertype>
    </supertypes>
    <childNodeDefinition name="*" autoCreated="false"
                         mandatory="false" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="true"
                         defaultPrimaryType="">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:property</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>

  <!-- icalendar properties -->

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="icalendar:prodid" primaryItemName="icalendar:value">
    <supertypes>
      <supertype>icalendar:property</supertype>
    </supertypes>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="false" name="icalendar:value"
                        onParentVersion="COPY" protected="false"
                        requiredType="String"/>
  </nodeType>

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="icalendar:version" primaryItemName="">
    <supertypes>
      <supertype>icalendar:property</supertype>
    </supertypes>
    <propertyDefinition autoCreated="false" mandatory="false"
                        multiple="false" name="icalendar:minVersion"
                        onParentVersion="COPY" protected="false"
                        requiredType="String"/>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="false" name="icalendar:maxVersion"
                        onParentVersion="COPY" protected="false"
                        requiredType="String"/>
  </nodeType>

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="icalendar:calscale" primaryItemName="icalendar:value">
    <supertypes>
      <supertype>icalendar:property</supertype>
    </supertypes>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="false" name="icalendar:value"
                        onParentVersion="COPY" protected="false"
                        requiredType="String"/>
  </nodeType>

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="icalendar:method" primaryItemName="icalendar:value">
    <supertypes>
      <supertype>icalendar:property</supertype>
    </supertypes>
    <propertyDefinition autoCreated="false" mandatory="true"
                        multiple="false" name="icalendar:value"
                        onParentVersion="COPY" protected="false"
                        requiredType="String"/>
  </nodeType>

  <!-- icalendar calendar -->

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="icalendar:calendar" primaryItemName="">
    <supertypes>
      <supertype>nt:base</supertype>
    </supertypes>
    <childNodeDefinition name="icalendar:prodid" autoCreated="false"
                         mandatory="true" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="false"
                         defaultPrimaryType="icalendar:prodid">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:prodid</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
    <childNodeDefinition name="icalendar:version" autoCreated="false"
                         mandatory="true" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="false"
                         defaultPrimaryType="icalendar:version">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:version</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
    <childNodeDefinition name="icalendar:calscale" autoCreated="false"
                         mandatory="false" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="false"
                         defaultPrimaryType="icalendar:calscale">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:calscale</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
    <childNodeDefinition name="icalendar:method" autoCreated="false"
                         mandatory="false" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="false"
                         defaultPrimaryType="icalendar:method">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:method</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
    <childNodeDefinition name="*" autoCreated="false"
                         mandatory="false" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="true"
                         defaultPrimaryType="">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:property</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
    <childNodeDefinition name="*" autoCreated="false"
                         mandatory="false" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="true"
                         defaultPrimaryType="">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:component</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>

  <!-- caldav -->

  <nodeType hasOrderableChildNodes="false" isMixin="false"
            name="caldav:calendarCollection" primaryItemName="">
    <supertypes>
      <supertype>nt:folder</supertype>
    </supertypes>
    <childNodeDefinition name="icalendar:calendar" autoCreated="true"
                         mandatory="true" onParentVersion="VERSION"
                         protected="false" sameNameSiblings="false"
                         defaultPrimaryType="icalendar:calendar">
      <requiredPrimaryTypes>
        <requiredPrimaryType>icalendar:calendar</requiredPrimaryType>
      </requiredPrimaryTypes>
    </childNodeDefinition>
  </nodeType>

</nodeTypes>
